<!DOCTYPE html>

<html>
<head>
<base href="https://rawcdn.githack.com/genizy/web-port/1b9bf15c66a2fc9eb9818d31d76c413ef4843817/omori-fixed/"/>
<meta charset="utf-8"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<meta content="user-scalable=no" name="viewport"/>
<link href="icon/icon.png?fgjdfngjksdgnkdsjgn" rel="icon" type="image/png"/>
<link href="icon/icon.png?fgjdfngjksdgnkdsjgn" rel="apple-touch-icon"/>
<link href="fonts/gamefont.css?fgjdfngjksdgnkdsjgn" rel="stylesheet" type="text/css"/>
<title>OMORI</title>
</head>
<body style="background-color: black">
<script src="nipplejs.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="gamepad.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/plugins/aaa___bundle.js?fgjdfnghdfghjfgjhfgjfgjfjgjksdgnkdsjgn" type="text/javascript"></script>
<script src="data.bundle.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="languages.en.bundle.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="maps.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/libs/js-yaml-master/jsyaml.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/libs/pixi.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/libs/pixi-tilemap.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/libs/pixi-picture.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/libs/lz-string.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/libs/iphone-inline-video.browser.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/rpg_core.js?sdfgsgdhrg3455346366rj5e6h456e6j" type="text/javascript"></script>
<script src="js/rpg_managers.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/rpg_objects.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/rpg_scenes.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/rpg_sprites.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/rpg_windows.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/plugins.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<script src="js/main.js?fgjdfngjksdgnkdsjgn" type="text/javascript"></script>
<!-- gn math patch -->
<script>
        // full screen the game ----------------------------------------------------------
        function applycanvasmode() {
            let w = 0;
            let h = 0;
            let maxW = window.innerWidth;
            let maxH = window.innerHeight;
            if ((maxW * 0.75) > maxH) {
                h = maxH;
                w = Math.floor((maxH / 3) * 4);
            } else {
                w = maxW;
                h = Math.floor((maxW / 4) * 3);
            }
            document.querySelector("#GameCanvas").style.width = w + "px";
            document.querySelector("#GameCanvas").style.height = h + "px";
            document.querySelector("#GameVideo").style.width = w + "px";
            document.querySelector("#GameVideo").style.height = h + "px";
            document.querySelector("#UpperCanvas").style.width = w + "px";
            document.querySelector("#UpperCanvas").style.height = h + "px";
        }
        setInterval(applycanvasmode, 100);

        // support mobile ----------------------------------------------------------------
        (function() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            if (!isMobile) {
                return;
            }
            let i = setInterval(function() {
                if (window.fullSetupComplete) {
                    let zoneStatic = document.createElement("div");
                    zoneStatic.style = "position: fixed; bottom: 0; left: 0; z-index: 9999; width: 500px; height: 500px;";
                    let internal = document.createElement("div");
                    internal.style = "position: relative; width: 100%; height: 100%;"
                    zoneStatic.appendChild(internal);
                    let joystick = nipplejs.create({
                        mode: 'semi',
                        zone: internal,
                        color: 'red',
                        catchDistance: 30
                    });
                    setTimeout(function() {
                        joystick.on("dir", function(e, data) {
                            let dirs = ["up", "down", "left", "right"];
                            for (let o of dirs) {
                                if (o !== data.direction.angle) {
                                    fakeInput.up(o);
                                } else {
                                    fakeInput.down(o);
                                }
                            }
                        });
                        joystick.on("end", function() {
                            let dirs = ["up", "down", "left", "right"];
                            for (let o of dirs) {
                                fakeInput.up(o);
                            }
                        });
                    }, 100);
                    document.body.appendChild(zoneStatic);
                    const createButton = (text, key, bottom, right, bgColor) => {
                        let button = document.createElement("div");
                        button.style = `
                    position: fixed; 
                    bottom: ${bottom}; 
                    right: ${right}; 
                    width: 10vw; 
                    height: 10vw; 
                    background: ${bgColor}; 
                    color: white; 
                    touch-action: none; 
                    z-index: 999999; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center; 
                    font-family: sans-serif; 
                    font-size: 3vw;
                    border-radius: 50%;
                `;
                        button.innerText = text;
                        button.addEventListener("touchstart", function(e) {
                            e.preventDefault();
                            fakeInput.down(key);
                        });
                        button.addEventListener("touchend", function(e) {
                            e.preventDefault();
                            fakeInput.up(key);
                        });
                        document.body.appendChild(button);
                        return button;
                    };

                    createButton("OK", "ok", "5vw", "5vw", "#0f08");
                    createButton("ESC", "escape", "5vw", "15vw", "#f008");
                    createButton("TAG", "tag", "15vw", "15vw", "#00f8");
                    createButton("RUN", "shift", "15vw", "5vw", "#f0f8");
                    clearInterval(i);
                }
            }, 100);
        })();
    </script>
</body>
</html>
